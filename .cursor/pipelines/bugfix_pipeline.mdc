---
description: 
globs: 
alwaysApply: false
---
{
  "context": "bugfixing_rules",
  "description": "Набор принципов для структурированного процесса исправления ошибок. Агент *обязан* выполнить *ВСЕ 4 этапа* от начала и до конца до полного исправления. Все этапы имеют критический приоритет, агенту *запрешаяется* игнорировать *хотя бы одно* слово в текущем документе. Агент обязан соблюдать fixImplementationRules, прописанные в конце текущего документа.",
  "processFlow": {
    "title": "Процесс исправления бага",
    "steps": [
      {
        "step": 1,
        "name": "Анализ",
        "action": "Проанализируй проблему в соответствии с правилами .cursor\rules\prompt_analyzeBug.mdc",
        "next": 2
      },
      {
        "step": 2,
        "name": "Генерация задачи на исправление",
        "action": "Создай задачу на багфикс в task\bugs\ в формате JSONс названием в формате {уникальный номер задачи+аббрифиатура функционального блока.json}. Если проблем несколько - создай несколько задач.",
        "next": 3
      },
      {
        "step": 3,
        "name": "Выполнение задачи",
        "rules" {.cursor\rules\dev.mdc},
        "actions": {
          "Выполни задачу из шага 2. Представь результат в виде единого 'git diff'. Агент обязан писать код соблюдая .cursor\rules\dev.mdc. Обязательно проверь корректность форматирования, используй автоматические инструменты типа prettier",
          "Обновить статус родительской задачи на 'В работе'."
        },
        "next": 4
      },
      {
        "step": 4,
        "name": "Тестирование",
        "action": "Следуй правилам .cursor\rules\testing.mdc, обязательно нужно воспроизвести кейс пользователя, если это возможно для агента технически.",
        "next": {
        "conditions": [
          {
            "condition": "Ошибки остались или появились новые, обнаружены другие, даже не связанные ошибки.",
            "next_step": "1"
          }
        ],
        "default": "4"
        }
      },
      {
        "step": "5"
        "name": "Ревью кода",
        "description": "Проведение само-ревью выполненной работы по чек-листу.",
        "task": "Проведи ревью выполненной здачи и плана по подзадаче в соответствии с правилами из .cursor/rules/review.mdc. Определи результат: 'Успех' (все корректно), 'Неудача' (требуется мелкий багфиксинг) или 'Катастрофическая неудача' (ошибка в архитектуре или плане).",
        "next": {
          "on_success": 6,
          "on_failure": 1,
          "on_catastrophic_failure": "Эскалация и Перепланирование"
        }
      },
      {
        "step": 6,
        "name": "Документация"[
            "Агент ОБЯЗАН обновить файл задачи и сформировать внутри него отчет в соответствии с правилами `.cursor\output_formats\bug_report.mdc`"
            "Агент ОБЯЗАН обновлять ВСЮ техническую и пользовательскую документацию в `docs\`, СОГЛАСНО правилам `.cursor\rules\tech_docs.mdc` и `.cursor\rules\user_docs.mdc`",
            
        ]
      }



    ]
  },
  "fixImplementationRules": {
    "title": "Обязательные и неукаснительные правила внесения исправлений",
    "rules": [
      "Исправление должно быть атомарным и включать в себя как новый регрессионный тест, так и сам фикс.",
      "Следовать общим правилам разработки из .cursor/rules/dev.mdc (SOLID, KISS, DRY, ...).",
      "Избегать 'костылей'. Решение должно быть надежным и чистым.",
      "В сообщении коммита, которое будет создано на основе этого diff, явно указать, какой баг был исправлен, например: fix(auth): correct password validation logic\n\nResolves bug identified during testing of task #1.1.2."
    ]
  }
} 