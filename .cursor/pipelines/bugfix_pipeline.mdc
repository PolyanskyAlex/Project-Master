---
description: 
globs: 
alwaysApply: false
---
{
  "context": "bugfixing_rules",
  "description": "Набор принципов для структурированного процесса исправления ошибок. Агент *обязан* выполнить *ВСЕ 4 этапа* от начала и до конца до полного исправления. Все этапы имеют критический приоритет, агенту *запрешаяется* игнорировать *хотя бы одно* слово в текущем документе. Агент обязан соблюдать fixImplementationRules, прописанные в конце текущего документа.",
  "rules": [
    "*ОБЯЗАТЕЛЬНО И СТРОГО! Агент обязан выполнить абсолютно каждый пункт, каждую строку, соблюдать каждое правило, читать каждое вложенное правило и документацию ПОЛНОСТЬЮ. ОБЯЗАТЕЛЬНО И СТРОГО!*"
  ],
  "processFlow": {
    "title": "Процесс исправления бага",
    "steps": [
      {
        "step": 1,
        "name": "Анализ",
        "action": "*ОБЯЗАТЕЛЬНО* прочитай полностью правила `.cursor\rules\prompt_analyzeBug.mdc` и проанализируй проблему в соответствии с правилами",
        "rules": "Агент ОБЯЗАН следовать правилам `.cursor\rules\prompt_analyzeBug.mdc`"
        "next": 2
      },
      {
        "step": 2,
        "name": "Генерация задачи на исправление",
        "action": "Если баг новый - создай задачу на багфикс в `task\bugs\` в формате JSONс названием в формате `{уникальный номер задачи+аббрифиатура функционального блока.json}`. Если проблем несколько - создай несколько задач.",
        "next": 3
      },
      {
        "step": 3,
        "name": "Выполнение задачи",
        "actions": [
          "*ОБЯЗАТЕЛЬНО* прочитай полностью правила `.cursor\rules\dev.mdc`. Выполни задачу из шага 2 в соответствии с правилами. Представь результат в виде единого 'git diff'. Агент обязан писать код соблюдая . Обязательно проверь корректность форматирования, используй автоматические инструменты типа prettier",
          "Обновить статус родительской задачи на 'В работе'."
        ],
        "rules": [
            "Агент ОБЯЗАН следовать правилам `.cursor\rules\dev.mdc`",
            "Всегда устанавливай новые сформированные пакеты самостоятельно, выполняй все действия для этого."
        ]
        "next": 4
      },
      {
        "step": 4,
        "name": "Тестирование",
        "actions": [
            "*ОБЯЗАТЕЛЬНО* прочитай полностью правила `.cursor\rules\testing.mdc` и проведли тестирование в соответствии с правилами", 
            "*ОБЯЗАТЕЛЬНО* воспроизведи кейс пользователя, если это возможно для агента без доработок.",
        ],
        "rules": "Агент ОБЯЗАН следовать правилам `.cursor\rules\testing.mdc`"
        "next": {
        "conditions": [
          {
            "condition": "Ошибки остались или появились новые, обнаружены другие, даже не связанные ошибки.",
            "next_step": "1"
          }
        ],
        "default": "4"
        }
      },
      {
        "step": "5"
        "name": "Ревью кода",
        "description": "Проведение само-ревью выполненной работы по чек-листу.",
        "actions": [
            "*ОБЯЗАТЕЛЬНО* прочитай полностью правила `.cursor/rules/review.mdc`",
            "Проведи ревью выполненной здачи и плана по подзадаче в соответствии с правилами.",
            "Определи результат: 'Успех' (все корректно), 'Неудача' (требуется мелкий багфиксинг) или 'Катастрофическая неудача' (ошибка в архитектуре или плане).",
        ],
        "rules": "Агент ОБЯЗАН следовать правилам `.cursor/rules/review.mdc`"
        "next": {
          "on_success": 6,
          "on_failure": 1,
          "on_catastrophic_failure": "Эскалация и Перепланирование"
        }
      },
      {
        "step": 6,
        "name": "Документация"
        "Actions": [
            "Обновить *ВСЮ* техническую и пользовательскую документацию в `docs\`, СОГЛАСНО правилам `.cursor\rules\tech_docs.mdc` и `cursor\rules\user_docs.mdc`",
            "Обновить файл задачи и сформировать внутри него отчет в соответствии с правилами `.cursor\output_formats\bug_report.mdc`"
        ],
        "rules": [
            "Агент ОБЯЗАН обновить файл задачи и сформировать внутри него отчет в соответствии с правилами `.cursor\output_formats\bug_report.mdc`",
            "Агент ОБЯЗАН следовать правилам `.cursor\rules\tech_docs.mdc` и `cursor\rules\user_docs.mdc`"            
        ],
        "restrictions":
        [
            "Запрещается создавать отдельные файлы отчета о проделанной работе"
        ]
      },
      {
        "step": 7,
        "name": "Проверка выполненных работ"
        "Actions": [
            "Проверить, что все шаги пайплайна выполнены строго и полностью и вывести кратчайший отчет."
        ],
        "rules": [
            "Агент обязан пройти каждый шаг полностью."            
        ],
        "restrictions":
        [
            "Агенту запрещено игнорировать хотя бы одно слово в описанных шагах"            
        ]
      }

    ]
  },
  "fixImplementationRules": {
    "title": "Обязательные и неукаснительные правила внесения исправлений",
    "rules": [
      "В сообщении коммита, которое будет создано на основе этого diff, явно указать, какой баг был исправлен, например: fix(auth): correct password validation logic\n\nResolves bug identified during testing of task #1.1.2."
    ]
  }
} 